$(document).ready(startfn);
function startfn(){function c(a,b,p){var c;a=d3.select(b).select(p).select("svg").append("g").attr({id:"bars"}).selectAll("rect").data(a).enter().append("rect").style({fill:function(a,d){return k(d)}}).attr({width:e.rangeBand(),height:0,x:function(a,d){return e(d)},y:f,id:function(a,d){return d+"rect"+a}}).on("mouseover",function(a){c=this.style.fill;g.transition().style({opacity:.9}).duration(100);g.html(a).style({top:d3.event.pageY-40+"px",left:d3.event.pageX-10+"px"});d3.select(this).style({opacity:.5,
fill:"orange"})}).on("mouseout",function(){g.transition().style({opacity:0});d3.select(this).style({opacity:1,fill:c})});a.transition().attr({height:function(a){return h(a)},y:function(a){return f-h(a)}}).delay(function(a,d){return 10*d}).duration(1E3).ease(q[effectsIndex]);effectsIndex=0==effectsIndex?1:0;return a}function l(){k=d3.scale.linear().range(r).domain([0,.14*a.length,.28*a.length,.42*a.length,.56*a.length,.7*a.length,.84*a.length,a.length]);h=d3.scale.linear().range([0,f]).domain([0,d3.max(a,
function(a){return a})]);e=d3.scale.ordinal().rangeBands([0,t],.1,.3).domain(d3.range(0,a.length))}function m(a){for(var b=[],c=0;c<a;c++)b.push(Math.round(10+90*Math.random()));return b}var b=15,r="#B58929 #C61C6F #9900ff #268BD2 #28ABE3 #85992C #208000 #006600".split(" "),q=["elastic","bounce"];effectsIndex=0;var g=d3.select("body").append("div").attr("id","tooltip").style({position:"absolute",padding:"0 10px",background:"white",opacity:0}),a=m(b),e,h,k;ui.output.pageLoad("#viz","#speedbar","#progressbar");
ui.output.drawSVG("#viz");var n=d3.select("svg"),f=parseFloat(n.style("height"))-30-40,t=parseFloat(n.style("width"))-0-0-150;l();c(a,"#viz","#mainSVG");$("#randomize").on("click",function(){$("#slide").css("padding-top","90px");$("#slide").toggle("slide")});$("#gen").on("click",function(){b=+$("#barsInput").val();5E3<b?alert("Too many!"):($("#slide").toggle("slide"),a.length=0,a=m(b),$("#bars").remove(),l(),c(a,"#viz","#mainSVG"))})};
