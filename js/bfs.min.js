$(document).ready(startfn);
function startfn(){function h(a){$("#play").removeClass();$("#play").addClass("glyphicon glyphicon-"+a+" playpause")}function C(){f=+$("#sourceInput").val();y();if(f>b.V()-1||0>f){var a=b.V()-1;alert("please select a source between 0 and "+a)}else{m&&(ui.output.resetGraph(b),m=!1);g=1;h("pause");for(a=0;a<b.V();a++)a!==f&&(b.colors[a]="WHITE",b.d[a]=-1,b.parents[a]=-1);b.colors[f]="GRAY";b.d[f]=0;b.parents[f]=0;r.enqueue(f)}for(t=0;0<r.size();){a=r.dequeue();t++;var n={};n[a]=[];for(var d=b.getAdj(a),
e=0;e<d.length;e++){var c=d[e];"WHITE"===b.colors[c]&&(t++,n[a].push(c),b.colors[c]="GRAY",b.d[c]=b.d[a]+1,b.parents[c]=a,r.enqueue(c))}q.push(n);"BLACK"===b.colors[a]}0!=t&&(u=100/t);p++}function z(){if(e>=q.length)g=3,h("repeat");else{var a=Object.keys(q[e])[0],c="#vertex"+a,a="#text"+a,D={},f=[];f.push(c);f.push(a);D.vertex=f;k.push(D);d=ui.output.getSpeedInMilliseconds("#speedbar");d3.select(c).transition().style({fill:"#F38630",stroke:"#F38630"}).duration(d);d3.select(a).transition().style({fill:"rgb(255, 255, 255)"}).duration(d);
l="edge";ui.output.changeProgressBar("#progressbar",u);e==b.V()-1&&(g=3,h("repeat"))}}function E(){var a=Object.keys(q[e])[0],n=q[e][a];if(0==n.length){l="vertex";x.push(c);c=0;e++;var a={},f=[];a.edgeTurn=f;k.push(a);z();if(e==b.V()){g=3;h("repeat");return}}else if(c>=n.length){if(l="vertex",c=0,e++,e==b.V()){g=3;h("repeat");return}}else{var p="#vertex"+n[c],m="#edge",m=parseInt(a)<n[c]?m+a+n[c]:m+n[c]+a,a={},f=[];f.push(p);f.push(m);a.edge=f;k.push(a);d=ui.output.getSpeedInMilliseconds("#speedbar");
d3.select(m).transition().style({stroke:"rgb(0, 128, 0)","stroke-width":5}).duration(d);d3.select(p).transition().style({fill:"#808080",stroke:"#808080"}).delay(50).duration(d);c++;if(c>=n.length&&(l="vertex",x.push(c),c=0,e++,a={},f=[],a.edgeTurn2=f,k.push(a),e==b.V())){g=3;h("repeat");return}ui.output.changeProgressBar("#progressbar",u)}e==b.V()&&(g=3,h("repeat"))}function v(a){m=!0;e<=b.V()-1&&1===g&&a==p?"vertex"==l?(z(),d=ui.output.getSpeedInMilliseconds("#speedbar"),setTimeout(function(){v(a)},
d)):"edge"==l&&(E(),d=ui.output.getSpeedInMilliseconds("#speedbar"),setTimeout(function(){v(a)},d)):e==b.V()&&(g=3,h("repeat"))}function F(){if(0<k.length&&0===g){var a=k.pop(),b=Object.keys(a)[0];"vertex"==b?(b=a.vertex[0],a=a.vertex[1],d=ui.output.getSpeedInMilliseconds("#speedbar"),d3.select(b).transition().style({fill:"#808080",stroke:"#808080"}).duration(d),d3.select(a).transition().style({fill:"#000000"}).duration(d),l="vertex",a=-1*u,ui.output.changeProgressBar("#progressbar",a),a=k[k.length-
1],a=Object.keys(a)[0],"edgeTurn"==a&&(l="edge",e--,c=x.pop(),k.pop())):"edge"==b?(b=a.edge[0],a=a.edge[1],d=ui.output.getSpeedInMilliseconds("#speedbar"),d3.select(b).transition().style({fill:"#FFFFFF",stroke:"#C61C6F"}).delay(50).duration(d),d3.select(a).transition().style({stroke:"#000000","stroke-width":2}).duration(d),c--,a=-1*u,ui.output.changeProgressBar("#progressbar",a)):"edgeTurn2"==b&&(l="edge",e--,c=x.pop(),a=k[k.length-1],a=Object.keys(a)[0],"edge"==a&&F())}}function y(){l="vertex";c=
e=0;r=new Queue;k=[];q=[];ui.output.drawProgressBar("#progressbar")}function A(a){$("#mainSVG").remove();ui.output.redrawGraph(B[0],"#viz",a);b=ui.output.graph();B=ui.output.graphNodes();y();g=2;h("play");m=!1;p=0;G()}function H(){"none"==$("#slide").css("display")?$(".thirdelem").css("padding-top","90px"):$(".thirdelem").css("padding-top","45px")}function I(){$("#slide").toggle("slide");setTimeout(function(){H()},500)}function G(){H();$("#slide3").toggle("slide")}var t=0,u=0,m=!1,g=2,l="vertex",
e=0,c=0,x=[],r=new Queue,k=[],q=[],p=0,d=500,w=0;ui.output.pageLoad("#viz","#speedbar","#progressbar");var f=0,B=ui.output.graphNodes(),b=ui.output.graph();$("#play").on("click",function(){0===g?(g=1,h("pause"),v(p)):1===g?(g=0,h("play")):3===g&&(C(),g=1,h("pause"),d=ui.output.getSpeedInMilliseconds("#speedbar"),setTimeout(function(){v(p)},d))});$("#forward").on("click",function(){e<=b.V()-1&&0===g&&("vertex"==l?z():"edge"==l&&E())});$("#backward").on("click",F);$("#runBFS").on("click",I);$("#startBFS").on("click",
function(){I();C();d=ui.output.getSpeedInMilliseconds("#speedbar");setTimeout(function(){v(p)},d)});$("#samples").on("click",G);$("#graph1").on("click",function(){A(1)});$("#graph2").on("click",function(){A(2)});$("#graph3").on("click",function(){A(3)});d3.select("#drawPanel").on("mousedown",function(){d3.event.defaultPrevented||ui.output.drawVertexOnClick(this,w++)});$("#draw").on("click",function(){ui.output.resetDrawPanel();w=0});$("#doneButton").on("click",function(){0!=w&&($("#mainSVG").remove(),
ui.output.drawUserGraph(w,"#viz"),b=ui.output.graph(),B=ui.output.graphNodes(),y(),g=2,h("play"),m=!1,p=0)});$("#restartButton").on("click",function(){ui.output.resetDrawPanel();w=0})};
